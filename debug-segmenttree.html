<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug SegmentTree</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .debug { background: #f0f0f0; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .error { background: #ffe6e6; border: 1px solid #ff9999; }
        .success { background: #e6ffe6; border: 1px solid #99ff99; }
    </style>
</head>
<body>
    <h1>ğŸ” SegmentTree è°ƒè¯•å™¨</h1>
    <div id="debug-output"></div>
    
    <script>
        function log(message, isError = false) {
            const div = document.createElement('div');
            div.className = 'debug ' + (isError ? 'error' : 'success');
            div.innerHTML = '<strong>' + new Date().toLocaleTimeString() + ':</strong> ' + message;
            document.getElementById('debug-output').appendChild(div);
        }
        
        // åŠ è½½ä¸»é¡µé¢å¹¶æ£€æŸ¥
        function loadAndCheck() {
            log('å¼€å§‹åŠ è½½ä¸»é¡µé¢...');
            
            const iframe = document.createElement('iframe');
            iframe.src = 'SegMentTree.html';
            iframe.style.width = '100%';
            iframe.style.height = '400px';
            iframe.style.border = '1px solid #ccc';
            iframe.style.marginTop = '20px';
            
            iframe.onload = function() {
                try {
                    const doc = iframe.contentDocument || iframe.contentWindow.document;
                    
                    // æ£€æŸ¥å…³é”®å…ƒç´ 
                    const fontSlider = doc.getElementById('font-size-slider');
                    const lineSlider = doc.getElementById('line-height-slider');
                    const buildBtn = doc.getElementById('btn-build');
                    
                    log('å­—ä½“å¤§å°æ»‘å—: ' + (fontSlider ? 'âœ… æ‰¾åˆ°' : 'âŒ æœªæ‰¾åˆ°'));
                    log('è¡Œé«˜æ»‘å—: ' + (lineSlider ? 'âœ… æ‰¾åˆ°' : 'âŒ æœªæ‰¾åˆ°'));
                    log('æ„å»ºæŒ‰é’®: ' + (buildBtn ? 'âœ… æ‰¾åˆ°' : 'âŒ æœªæ‰¾åˆ°'));
                    
                    if (fontSlider) {
                        log('å­—ä½“æ»‘å—å€¼: ' + fontSlider.value);
                        log('å­—ä½“æ»‘å—äº‹ä»¶: ' + (fontSlider.oninput ? 'æœ‰' : 'æ— '));
                    }
                    
                    if (lineSlider) {
                        log('è¡Œé«˜æ»‘å—å€¼: ' + lineSlider.value);
                        log('è¡Œé«˜æ»‘å—äº‹ä»¶: ' + (lineSlider.oninput ? 'æœ‰' : 'æ— '));
                    }
                    
                    // æµ‹è¯•å‡½æ•°æ˜¯å¦å­˜åœ¨
                    const win = iframe.contentWindow;
                    log('changeFontSizeå‡½æ•°: ' + (typeof win.changeFontSize === 'function' ? 'âœ… å­˜åœ¨' : 'âŒ ä¸å­˜åœ¨'));
                    log('changeLineHeightå‡½æ•°: ' + (typeof win.changeLineHeight === 'function' ? 'âœ… å­˜åœ¨' : 'âŒ ä¸å­˜åœ¨'));
                    log('buildTreeVisualizationå‡½æ•°: ' + (typeof win.buildTreeVisualization === 'function' ? 'âœ… å­˜åœ¨' : 'âŒ ä¸å­˜åœ¨'));
                    
                    // æµ‹è¯•æ‰‹åŠ¨è°ƒç”¨
                    if (typeof win.changeFontSize === 'function') {
                        try {
                            win.changeFontSize(16);
                            log('âœ… æ‰‹åŠ¨è°ƒç”¨ changeFontSize(16) æˆåŠŸ');
                        } catch (e) {
                            log('âŒ æ‰‹åŠ¨è°ƒç”¨ changeFontSize å¤±è´¥: ' + e.message, true);
                        }
                    }
                    
                } catch (e) {
                    log('âŒ æ£€æŸ¥è¿‡ç¨‹ä¸­å‡ºé”™: ' + e.message, true);
                }
            };
            
            iframe.onerror = function() {
                log('âŒ é¡µé¢åŠ è½½å¤±è´¥', true);
            };
            
            document.body.appendChild(iframe);
        }
        
        // å¼€å§‹æ£€æŸ¥
        document.addEventListener('DOMContentLoaded', loadAndCheck);
    </script>
</body>
</html>
