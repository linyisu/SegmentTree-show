<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>区间修改可视化调试</title>
  <style>
    :root {
      --primary-color: #74b9ff;
      --secondary-color: #0984e3;
      --card-bg: #f8f9fa;
      --text-color: #2d3748;
    }
    
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background: #f0f2f5;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    
    .controls {
      margin-bottom: 20px;
      padding: 15px;
      background: var(--card-bg);
      border-radius: 8px;
      border: 1px solid #e1e5e9;
    }
    
    .control-group {
      margin-bottom: 15px;
    }
    
    label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
      color: var(--text-color);
    }
    
    input[type="text"], input[type="number"] {
      width: 100%;
      padding: 8px 12px;
      border: 2px solid #e1e5e9;
      border-radius: 6px;
      font-size: 14px;
      transition: border-color 0.3s;
    }
    
    input[type="text"]:focus, input[type="number"]:focus {
      outline: none;
      border-color: var(--primary-color);
    }
    
    .btn {
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      font-weight: bold;
      transition: all 0.3s;
      margin-right: 10px;
      margin-bottom: 10px;
    }
    
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(116, 185, 255, 0.3);
    }
    
    .btn-group {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    
    .range-inputs {
      display: flex;
      gap: 10px;
      align-items: end;
    }
    
    .range-inputs > div {
      flex: 1;
    }
    
    #debug-info {
      background: #f8f9fa;
      border: 1px solid #e9ecef;
      border-radius: 6px;
      padding: 15px;
      margin-top: 20px;
      font-family: monospace;
      font-size: 12px;
      white-space: pre-wrap;
      max-height: 300px;
      overflow-y: auto;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>🔧 区间修改可视化调试工具</h1>
    
    <div class="controls">
      <div class="control-group">
        <label for="input-custom-data">数组数据 (1-8个数字，范围1-100):</label>
        <input type="text" id="input-custom-data" placeholder="例如: 1 2 3 4">
      </div>
      
      <div class="btn-group">
        <button id="btn-random-data" class="btn">🎲 随机生成</button>
        <button id="btn-update-custom-data" class="btn">🚀 更新可视化</button>
      </div>
      
      <div class="range-inputs">
        <div>
          <label for="input-modify-left">左边界:</label>
          <input type="number" id="input-modify-left" value="1" min="1">
        </div>
        <div>
          <label for="input-modify-right">右边界:</label>
          <input type="number" id="input-modify-right" value="1" min="1">
        </div>
        <div>
          <label for="input-modify-value">修改值:</label>
          <input type="number" id="input-modify-value" value="1">
        </div>
        <div>
          <button id="btn-apply-modification" class="btn">🔄 应用修改</button>
        </div>
      </div>
    </div>
    
    <div id="custom-tree-visualizer-host"></div>
    
    <div id="debug-info"></div>
  </div>
  
  <script>
    // 全局调试日志函数
    function debugLog(message) {
      const debugDiv = document.getElementById('debug-info');
      const timestamp = new Date().toLocaleTimeString();
      debugDiv.textContent += `[${timestamp}] ${message}\n`;
      debugDiv.scrollTop = debugDiv.scrollHeight;
      console.log(message);
    }
    
    // 页面加载时开始调试
    document.addEventListener('DOMContentLoaded', () => {
      debugLog('🚀 页面加载完成，开始调试...');
      
      // 检查所有必需的HTML元素
      const elements = {
        'input-custom-data': document.getElementById('input-custom-data'),
        'btn-random-data': document.getElementById('btn-random-data'),
        'btn-update-custom-data': document.getElementById('btn-update-custom-data'),
        'custom-tree-visualizer-host': document.getElementById('custom-tree-visualizer-host'),
        'input-modify-left': document.getElementById('input-modify-left'),
        'input-modify-right': document.getElementById('input-modify-right'),
        'input-modify-value': document.getElementById('input-modify-value'),
        'btn-apply-modification': document.getElementById('btn-apply-modification')
      };
      
      debugLog('📋 HTML元素检查:');
      Object.entries(elements).forEach(([id, element]) => {
        debugLog(`  ${id}: ${element ? '✅' : '❌'}`);
      });
      
      // 等待脚本加载
      setTimeout(() => {
        debugLog('🔍 检查脚本模块:');
        debugLog(`  ModifyTreeVisualizer: ${window.ModifyTreeVisualizer ? '✅' : '❌'}`);
        
        if (window.ModifyTreeVisualizer) {
          debugLog('🔧 调用初始化函数...');
          try {
            window.ModifyTreeVisualizer.initModifyTreeVisualizer();
            debugLog('✅ 初始化成功');
          } catch (error) {
            debugLog(`❌ 初始化失败: ${error.message}`);
          }
        }
      }, 500);
    });
  </script>
  
  <!-- 加载模块脚本 -->
  <script src="js/generate_Visualizer_modify.js"></script>
</body>
</html>
